# 出力データ一覧

最終更新日: 2025-09-25

本ドキュメントでは `private_reports/` に生成される主要CSVの役割・カラム構造を整理します。Google スプレッドシート「freee Data Getter for Google Sheets サンプルシート (1).xlsx」と対応しており、`scripts/generate_pl_report.js` または `scripts/export_freee_reports.js` を実行することで再出力できます。

---

## 1. 月次推移レポート（`scripts/generate_pl_report.js`）

`node scripts/generate_pl_report.js --start=YYYY-MM-DD --end=YYYY-MM-DD --group=account,partner,item,section --format=csv --pivot` を利用。

| ファイル名 | 主なカラム | 用途・備考 |
|------------|------------|------------|
| `pl_account_monthly.csv` | `month`, `勘定コード`, `勘定科目`, `freeeコード`, `区分`, `debit`, `credit`, `balance` | 勘定科目別の月次差額。`balance = debit - credit`。サンプルシート「勘定科目（月次）」に対応。 |
| `pl_account_pivot.csv` | `勘定コード`, `勘定科目`, `freeeコード`, `区分`, 各月列 | 勘定科目×月のピボット。Google Sheets のピボットタブに対応。 |
| `pl_partner_monthly.csv` | `month`, `勘定コード`, `勘定科目`, `freeeコード`, `取引先コード`, `取引先名`, `debit`, `credit`, `balance` | 取引先別の月次差額。サンプルシート「取引先（月次）」に対応。 |
| `pl_partner_pivot.csv` | `勘定コード`, `勘定科目`, `freeeコード`, `取引先コード`, `取引先名`, 各月列 | 取引先×月のピボット。 |
| `pl_item_monthly.csv` | `month`, `勘定コード`, `勘定科目`, `freeeコード`, `品目コード`, `品目名`, `debit`, `credit`, `balance` | 品目別の月次差額。サンプルシート「品目（月次）」に対応。 |
| `pl_item_pivot.csv` | `勘定コード`, `勘定科目`, `freeeコード`, `品目コード`, `品目名`, 各月列 | 品目×月のピボット。 |
| `pl_section_monthly.csv` | `month`, `勘定コード`, `勘定科目`, `freeeコード`, `部門コード`, `部門名`, `debit`, `credit`, `balance` | 部門別の月次差額。サンプルシート「部門（月次）」に対応。 |
| `pl_section_pivot.csv` | `勘定コード`, `勘定科目`, `freeeコード`, `部門コード`, `部門名`, 各月列 | 部門×月のピボット。 |
| `account_code_catalog.csv` | `hierarchical_code`, `freee_code`, `freee_id`, `name`, `shortcut_num`, `level1`〜`level4`, `account_category`, `group_id`, `group_name`, `update_date` | 勘定科目コード対照表。`docs/勘定科目コード体系.md` と併用。サンプルシート「勘定科目コード」に対応。 |

> 生成時は `pl_trial_balance_*.csv` 等一時ファイルも出力されますが、`scripts/export_freee_reports.js` 実行時に自動的にリネームされています。

---

## 2. サマリーレポート（`scripts/export_freee_reports.js`）

`node scripts/export_freee_reports.js --start=YYYY-MM-DD --end=YYYY-MM-DD --reports=pl_monthly,pl_sections,pl_items,trial_pl,trial_bs,journals`

| ファイル名 | 主なカラム | 用途・備考 |
|------------|------------|------------|
| `trial_pl_full.csv` | `開始日`, `終了日`, `階層レベル`, `親勘定科目`, `勘定科目カテゴリ`, `勘定科目グループ`, `勘定科目名`, `勘定科目ID`, `期首残高`, `借方金額`, `貸方金額`, `期末残高`, `構成比`, `合計行` | freee「損益計算書（表示タイプ: グループ）」をCSV化。サンプルシート「PL（表示タイプ：グループ）」に対応。 |
| `trial_bs_full.csv` | `trial_pl_full.csv` と同構造 | freee「貸借対照表（表示タイプ: グループ）」に対応。 |
| `pl_sections_summary.csv` | `開始日`, `終了日`, `部門ID`, `部門名`, `階層レベル`, `親勘定科目`, `勘定科目カテゴリ`, `勘定科目名`, `勘定科目ID`, `借方金額`, `貸方金額`, `期末残高` | 部門別PL（freee API `trial_pl_sections`）。サンプルシート「部門集計」に対応。 |
| `pl_items_summary.csv` | `開始日`, `終了日`, `勘定科目名`, `勘定科目ID`, `品目名`, `品目ID`, `借方金額`, `貸方金額`, `期末残高`, `構成比` | 品目別PL（`trial_pl_items`）。サンプルシート「品目集計」に対応。freee APIで品目機能有効時のみ生成。 |
| `journals_generic_v2.csv` | freee「仕訳帳（汎用v2）」準拠の全列（取引日、借方／貸方科目・取引先・品目・部門・セグメント、承認情報など） | 詳細仕訳帳。サンプルシート「仕訳帳」に対応。 |

> `pl_monthly` を指定すると 1章の月次CSV群も同時に生成／上書きされます。

---

## 3. サンプルシートとの対応表

| スプレッドシートのシート名 | 対応CSV | 備考 |
|------------------------------|----------|------|
| 勘定科目（月次） | `pl_account_monthly.csv` / `pl_account_pivot.csv` | Pivotは同じシートの右側に貼り付ける想定。 |
| 取引先（月次） | `pl_partner_monthly.csv` / `pl_partner_pivot.csv` | 取引先コードが未設定の場合 `-` / `(未設定)` を出力。 |
| 品目（月次） | `pl_item_monthly.csv` / `pl_item_pivot.csv` | 品目が未設定の場合 `(未設定)`。 |
| 部門（月次) | `pl_section_monthly.csv` / `pl_section_pivot.csv` | 部門コードが無い場合は空欄。 |
| 勘定科目コード | `account_code_catalog.csv` | 階層コードは 2-2-2-2-3 桁。 |
| PL（表示タイプ：グループ） | `trial_pl_full.csv` | freeeの試算表ダウンロードと同構造。 |
| BS（表示タイプ：グループ） | `trial_bs_full.csv` | 〃 |
| 部門集計 | `pl_sections_summary.csv` | `trial_pl_sections` の出力結果。 |
| 品目集計 | `pl_items_summary.csv` | 品目機能が無効の場合は空ファイルまたはスキップ。 |
| 仕訳帳 | `journals_generic_v2.csv` | freeeダウンロードCSVと同列構成。 |

---

### 参考

- コード体系: `docs/勘定科目コード体系.md`
- CSV出力手順: `README.md` の「月次試算表レポート」「Google Sheets 向けデータエクスポート」
- サンプルファイル: `freee Data Getter for Google Sheets サンプルシート (1).xlsx`

